@model SupervisorViewRegisterViewModel

@{
    ViewData["Title"] = "Add Extra Days";

    string regionCode = ViewBag.RegionCode ?? "";
}
<link href="/css/monitorlist.css" rel="stylesheet" />
<style>
    .badge.bg-pink {
        background-color: #ff69b4;
        color: white;
    }

    .btn-sm .fa-icon {
        font-size: 0.9em;
        line-height: 1;
        vertical-align: middle;
    }

    .display-6 {
        font-size: 1.5rem;
    }

    :root {
        --primary-color: #153355;
        --secondary-color: #4a8c5f;
        --accent-color: #e63946;
        --light-bg: #f8f9fa;
        --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.08);
    }

    body {
        background-color: #f5f7f9;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .header-container {
        position: relative;
        padding-bottom: 10px;
    }

    .accent-line {
        height: 4px;
        width: 80px;
        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        border-radius: 2px;
        margin-top: 8px;
    }

    .text-gradient {
        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .region-badge {
        font-size: 0.6em;
        color: white;
        padding: 4px 10px;
        border-radius: 20px;
        vertical-align: middle;
    }

    .card {
        border-radius: 10px;
        box-shadow: var(--card-shadow);
        transition: transform 0.2s;
        margin-bottom: 20px;
    }

        .card:hover {
            transform: translateY(-3px);
        }

    .filter-card {
        background-color: white;
    }

    .action-card {
        background: linear-gradient(135deg, #153355 0%, #1e4a6e 100%);
        color: white;
    }

    .btn-custom {
        background-color: #153355;
        color: white;
        border: 1px solid #153355;
    }

        .btn-custom:hover {
            background-color: #0f2642;
            border-color: #0f2642;
            color: white;
        }

    .btn-outline-custom {
        color: #153355;
        border-color: #153355;
        background-color: transparent;
    }

        .btn-outline-custom:hover {
            color: white;
            background-color: #153355;
            border-color: #153355;
        }

    .filter-label {
        font-weight: 600;
        color: #495057;
        margin-bottom: 5px;
    }

    .form-select {
        border-radius: 6px;
        padding: 10px;
        border: 1px solid #ced4da;
    }

    .action-icon {
        font-size: 2rem;
        margin-bottom: 15px;
        color: rgba(255, 255, 255, 0.9);
    }

    .section-title {
        position: relative;
        padding-bottom: 10px;
        margin-bottom: 20px;
        font-weight: 600;
        color: var(--primary-color);
    }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            width: 40px;
            background-color: var(--secondary-color);
            border-radius: 3px;
        }

    .code-container {
        background-color: #1e1e1e;
        color: #d4d4d4;
        padding: 20px;
        border-radius: 8px;
        font-family: 'Fira Code', monospace;
        overflow-x: auto;
        margin-top: 30px;
    }

    .code-comment {
        color: #6a9955;
    }

    .code-keyword {
        color: #569cd6;
    }

    .code-function {
        color: #dcdcaa;
    }

    .code-string {
        color: #ce9178;
    }

    .code-var {
        color: #9cdcfe;
    }

    /* Make Select2 match Bootstrap form control height */
    .select2-container .select2-selection--single {
        height: 38px !important;
        padding: 6px 12px;
        font-size: 14px;
        line-height: 1.5;
        border: 1px solid #ced4da;
        border-radius: 0.375rem;
    }

    .select2-container--default .select2-selection--single .select2-selection__arrow {
        height: 36px !important;
    }

    .select2-container--default .select2-selection--single .select2-selection__rendered {
        line-height: 24px !important;
    }
</style>


<div class="container-fluid px-4 mt-3">
    <!-- Header Section -->
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-2">
        <div>
            <div class="header-container mb-4">
                <h5 class="display-6 fw-bold text-gradient mb-1">
             Register for @Model.MonitorName
                </h5>
                <div class="accent-line"></div>
            </div>
        </div>

    </div>


    <div class="card border-0 shadow-sm mb-2 p-2">
<div class="row">
    <div class="col-md-6">
        <div class="card">
                    <div class="card-header" style="background-color: #e2eaeb;">
                <h4>Timetable Days</h4>
            </div>
            <div class="card-body">
                @if (Model.TimetableDays.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Supervisor Status</th>
                                    <th>Comment</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var day in Model.TimetableDays)
                                {
                                    <tr>
                                        <td>@day.Date.ToString("dd/MM/yyyy")</td>
                                        <td>
                                            <span class="badge @GetStatusBadgeClass(day.SupervisorStatus)">
                                                @day.SupervisorStatus
                                            </span>
                                        </td>
                                        <td>@day.SupervisorComment</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <p>No timetable days found.</p>
                }
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card">
                    <div class="card-header" style="background-color: #e2eaeb;">
                <h4>Supervisor-Added Days</h4>
            </div>
            <div class="card-body">
                @if (Model.SupervisorAddedDays.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Comment</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var day in Model.SupervisorAddedDays)
                                {
                                    <tr>
                                        <td>@day.Date.ToString("dd/MM/yyyy")</td>
                                        <td>
                                            <span class="badge text-black @GetStatusBadgeClass(day.SupervisorStatus)">
                                                @day.SupervisorStatus
                                            </span>
                                        </td>
                                        <td>@day.SupervisorComment</td>
                                        <td>
                                            <a href="@Url.Action("RemoveSupervisorDay", new { dateId = day.Id })"
                                               class="btn btn-sm btn-danger"
                                               onclick="return confirm('Are you sure you want to remove this day?')">
                                                Remove
                                            </a>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <p>No supervisor-added days found.</p>
                }

                <div class="mt-3">
                    <a href="@Url.Action("SupervisorAddDays")" class="btn btn-outline-custom">
                        <i class="fas fa-plus"></i> Add More Days
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

</div>

</div>

@functions {
    public string GetStatusBadgeClass(string status)
    {
        return status switch
        {
            "Approved" => "badge-success",
            "Pending" => "badge-warning",
            "Rejected" => "badge-danger",
            _ => "badge-secondary"
        };
    }
}
